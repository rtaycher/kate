<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE language SYSTEM "language.dtd">
<!--
  This is a language description for debian package changelog files.
  It should work, but is fairly untested.

  Changelog:
  0.6
  - not using changelog as an extension
  - nicer indentation
  - added information to TODO concerning case sensitivity

  TODO:
  - The closes bug section is not fully working yet. The correct perlish expression would be:
	/closes:\s*(?:bug)?\#?\s?\d+(?:,\s*(?:bug)?\#?\s?\d+)*/i  (from debian policy)
    The main problem is, that only works with lowercases now. This is a serios problem, as lots of developer
    use upper-/mixed case variants. I just don't know how to implement this properly:-(
	I tried to use insensitive="true" on RegExpr and casesensitive="0" on language, both didn't succeed.
	I could do something like [Bb][Uu][Gg]... but fear performance problems, comments?
  - Not sure if we should highlight email adresses all over the way?!?


  Any comments are warmly welcome!
  Simon Huerlimann <simon.huerlimann@access.unizh.ch>
-->
<language name="Debian Changelog" version="0.6" kateversion="2.1" section="Other" extensions="" mimetype="">
    <highlighting>
        <list name="keywords">
            <item>urgency</item>
        </list>

        <list name="distributions">
            <item>stable</item>
            <item>testing</item>
            <item>frozen</item>
            <item>unstable</item>
            <item>experimental</item>
        </list>

        <list name="urgencies">
            <item>low</item>
            <item>medium</item>
            <item>high</item>
            <item>emergency</item>
            <item>bug</item>
        </list>

        <contexts>
            <context attribute="Normal Text" lineEndContext="#stay">
                <RegExpr attribute="Keyword" context="Head" String="^[^ ]*"/>
                <RegExpr attribute="Email" context="#stay" String="&lt;.*@.*&gt;"/>
                <RegExpr attribute="Keyword" context="#stay" String="^ \-\-"/>
                <RegExpr attribute="Keyword" context="#stay" String="^  \*"/>
                <RegExpr attribute="Bug" context="#stay" String="closes: *((bug *)?#[0-9]*)( *, *(bug *)?#[0-9]*)*"/>
            </context>

            <context attribute="Normal Text" lineEndContext="#pop" name="Head">
                <DetectChar attribute="Keyword" context="Version" char="("/>
                <RegExpr attribute="Keyword" context="#stay" String="[,;=]"/>
                <keyword attribute="Keyword" context="#stay" String="keywords"/>
                <keyword attribute="Data" context="#stay" String="distributions"/>
                <keyword attribute="Data" context="#stay" String="urgencies"/>
            </context>

            <context attribute="Version" lineEndContext="#pop" name="Version">
                <DetectChar attribute="Keyword" context="#pop" char=")"/>
            </context>
        </contexts>

        <itemDatas>
            <itemData name="Normal Text" defStyleNum="dsNormal"/>
            <itemData name="Keyword"  defStyleNum="dsKeyword"/>
            <itemData name="Version"  defStyleNum="dsDataType"/>
            <itemData name="Data" defStyleNum="dsDataType"/>
            <itemData name="Bug"  defStyleNum="dsDataType"/>
            <itemData name="Email" defStyleNum="dsOthers"/>
        </itemDatas>
    </highlighting>

    <general>
        <keywords casesensitive="1" />
    </general>
</language>
